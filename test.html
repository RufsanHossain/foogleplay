<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foogle Play Unit Test</title>

    <!-- Mocha Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/11.0.0/mocha.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/11.0.0/mocha.js"></script>

    <!-- Chai Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.3.7/chai.js"></script>

    <!-- Sinon Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sinon.js/19.0.2/sinon.js"></script>

    <!-- jQuery, Underscore, and Backbone -->
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
</head>
<body>
    <!-- Container for Mocha Test Results -->
    <div id="mocha"></div>

    <!-- Book Detail View Template -->
    <script type="text/html" data-id="book-detail-view">
        <header class="book-header content content-constrained row"> 
            <div class="column thumb-image">
                <img src="<%= (images.small || images.thumbnail) %>" alt="">
            </div>
            <div class="column l-pad">
                <div class="title"><%= info.title %></div>
            <div>
                <span data-id="date-authors"><%= 
                    (info.authors ? "<em>" + info.authors.join(" - ") + "</em> - " : "") + info.publishedDate 
                %></span>
                <br>
                <span data-id="publisher"><%= publisher %></span>
            </div> 
            </div>
        </header>
        <div class="content book-content content-constrained standout">
            <h1 class="title">Description</h1>
            <p><%= info.description %></p>
        </div>
    </script>

    <!-- JavaScript Files -->
    <script>
        // Set up Mocha and Chai
        mocha.setup("bdd");

        // Global Testing Variables
        const expect = chai.expect;
        const assert = chai.assert;

        // Log for Debugging
        console.log("Chai is loaded:", !!chai);

        // Initialize Mocha on Page Load
        window.onload = function () {
            try {
                mocha.run();
            } catch (error) {
                console.error("Mocha encountered an error:", error);
            }
        };

        // Basic Error Check for Libraries
        if (!Backbone || !$ || !_) {
            console.error("One or more libraries failed to load.");
        } else {
            console.log("All libraries loaded successfully.");
        }
    </script>

    <!-- Application Scripts -->
    <script src="js/bootstrap.js" defer></script>
    <script src="js/routers/Router.js" defer></script>
    <script src="js/models/Book.js" defer></script>
    <script src="js/models/Books.js" defer></script>
    <script src="js/views/BooksList.js" defer></script>
    <script src="js/views/BookDetail.js" defer></script>
    <script src="js/views/TopBar.js" defer></script>

    <!-- Test Scripts -->
    <script src="test/tests.js" defer></script>
</body>
</html>
